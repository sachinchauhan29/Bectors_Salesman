$(function(){
  
  'use strict';
  
  var isDrawing, lastPoint;
  var container    = document.getElementById('scratch-container'),
      canvas       = document.getElementById('scratch-canvas'),
      canvasWidth  = canvas.width,
      canvasHeight = canvas.height,
      ctx          = canvas.getContext('2d'),
      image        = new Image(),
      brush        = new Image(),
    	scratched    = 10;
      
  image.src = 'data:image/jpeg;base64,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' 
  image.onload = function() {
    ctx.drawImage(image, 0, 0);
    $('.winner-box').css({visibility: 'visible'});
  };
  brush.src = 'data:image/png;base64,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';
  
  canvas.addEventListener('mousedown', handleMouseDown, false);
  canvas.addEventListener('touchstart', handleMouseDown, false);
  canvas.addEventListener('mousemove', handleMouseMove, false);
  canvas.addEventListener('touchmove', handleMouseMove, false);
  canvas.addEventListener('mouseup', handleMouseUp, false);
  canvas.addEventListener('touchend', handleMouseUp, false);
  
  function distanceBetween(point1, point2) {
    return Math.sqrt(Math.pow(point2.x - point1.x, 2) + Math.pow(point2.y - point1.y, 2));
  }
  
  function angleBetween(point1, point2) {
    return Math.atan2( point2.x - point1.x, point2.y - point1.y );
  }
  
  function getFilledInPixels(stride) {
    if (!stride || stride < 1) { stride = 1; }
    
    var pixels   = ctx.getImageData(0, 0, canvasWidth, canvasHeight),
        pdata    = pixels.data,
        l        = pdata.length,
        total    = (l / stride),
        count    = 0;
    
    for(var i = count = 0; i < l; i += stride) {
      if (parseInt(pdata[i]) === 0) {
        count++;
      }
    }
    
    return Math.round((count / total) * 100);
  }
  
  function getMouse(e, canvas) {
    var offsetX = 0, offsetY = 0, mx, my;

    if (canvas.offsetParent !== undefined) {
      do {
        offsetX += canvas.offsetLeft;
        offsetY += canvas.offsetTop;
      } while ((canvas = canvas.offsetParent));
    }

  if (!hasTouch()) {
    mx = e.pageX - offsetX;
    my = e.pageY - offsetY;
  } else {
    var touch = e.touches[0];
    mx = touch.pageX - offsetX;
    my = touch.pageY - offsetY;
  }

    return {x: mx, y: my};
  }
  
  function handlePercentage(filledInPixels,scratched) {
    filledInPixels = filledInPixels || 0;
    console.log(filledInPixels + '%');
    if (filledInPixels > scratched) {
		 // Delayed redirection after 2 seconds
		 setTimeout(function() {
			document.location.href = './upi';
	}, 2000); // 2000 milliseconds = 5 seconds

      $('#scratch-canvas').fadeOut('slow');
      
    }
  }
  
  function handleMouseDown(e) {
    isDrawing = true;
    lastPoint = getMouse(e, canvas);
  }

  function handleMouseMove(e) {
    if (!isDrawing) { return; }
    
    e.preventDefault();

    var currentPoint = getMouse(e, canvas),
        dist = distanceBetween(lastPoint, currentPoint),
        angle = angleBetween(lastPoint, currentPoint),
        x, y;
    
    for (var i = 0; i < dist; i++) {
      x = lastPoint.x + (Math.sin(angle) * i) - 0;
      y = lastPoint.y + (Math.cos(angle) * i) - 0;
      ctx.globalCompositeOperation = 'destination-out';
      ctx.drawImage(brush, x, y);
    }
    
    lastPoint = currentPoint;
    handlePercentage(getFilledInPixels(70),scratched);
  }

  function handleMouseUp(e) {
    isDrawing = false;
  }
  
  function hasTouch() {
  return (('ontouchstart' in window) ||
    (navigator.maxTouchPoints > 0) ||
    (navigator.msMaxTouchPoints > 0));
  }
  
});
